Why OpenIRC?
========

## A. 개요
IRC는 정말 재미난 대화수단이지만, 처음 보는 사람이 사용하는 데에는 상당한 진입장벽이 있습니다. 일반적인 IRC 클라이언트를 사용하면 창이 꺼져 있는 동안 접속이 끊기고, 그렇다고 리눅스 서버에 tmux/screen과 weechat/irssi를 써서 24시간 켜져 있는 IRC 클라이언트를 세팅하자니 관련 지식이 없는 사람들에겐 너무 힘들기 때문입니다. 

이는 많은 IRC 유저가 공감할 만한 문제이고, OpenIRC 프로젝트는 이 문제를 해결하기 위해 시작되었습니다.

## B. 문제 정의
![weechat]

현재 리눅스 서버와 tmux/screen, 그리고 weechat/irssi를 사용한 IRC 환경에는 아래와 같은 다양한 문제가 있습니다.

1. 쓸 수 있는 리눅스 서버가 있어야합니다.
2. 리눅스 및 putty와 screen/tmux와 같은 커맨드라인 도구의 사용에 익숙해야합니다.
3. 멘션이나 노티가 와도, 푸시 알림을 받을 수 없는 경우가 많습니다.
4. 모바일의 경우, 사용하는 ssh 클라이언트와 키보드에 따라 한글 입력이 불가능한 경우가 있습니다.
5. 안드로이드 유저의 경우, Weechat Relay를 쓰면 3-4번 문제를 해결할 수 있지만, 세팅이 어렵습니다.
6. 기본설정에서 실수로 weechat/irssi를 꺼버리면, 채널 목록이 모두 없어져서 손으로 복구 해 줘야 합니다.

이러한 문제들은 단순히 사용하면서 겪게 되는 약간의 불편함 정도가 아니라, 실제로 새로운 유저가 IRC 커뮤니티에 들어오는 것 자체를 막는 거대한 진입 장벽으로 작용합니다.

## C. 해결책
위에서 언급한 문제점을 해결하기 위해서는 아래와 같은 요구사항을 만족하는 클라이언트가 필요합니다.

1. **IRC나 리눅스를 전혀 모르는 사람도 바로 사용가능 할 것** (가장 중요한 기준)
2. 클라이언트 단에서 화면을 꺼도 IRC 연결이 항상 유지될 것
3. 현재 모바일 지원이 없더라도, 차후에 모바일 지원이 가능하도록 확장 가능한 구조일 것

이미 세상엔 여러 IRC 클라이언트가 존재하지만, 이러한 요구사항을 모두 만족하는 클라이언트는 찾을 수 없었습니다. ([Appendix I][appendix-1] 참고) 따라서 결국 해당 조건을 만족하는 클라이언트를 새로 만들기로 결정했습니다. 당분간은 전체 기능의 서브셋에 해당하는, 아래의 조건을 만족하는 MVP를 목표로 하고 있습니다.

1. **IRC나 리눅스를 전혀 모르는 사람도 바로 사용가능 할 것** (가장 중요한 기준)
2. 클라이언트 단에서 화면을 꺼도 IRC 연결이 24시간 유지될것
3. 메시징 프로토콜이 HTTP agnostic할것 (개발 편의성 및 성능을 위해 필요)

메세지브로커나 DB와 같이 기존에 이미 있는 솔루션을 활용할 수 있는 부분은 최대한 활용할 계획입니다. 현재 생각 중인 대략적인 구조는 아래와 같습니다.

<p align=center><img src="https://openirc.github.io/img/openirc-bigpicture.png"></p>

클라이언트는 MQTT 프로토콜 (+ websocket) 를 이용해 mosquitto MQTT 브로커와 통신합니다. mosquitto 는 MQTT 프로토콜로 OpenIRC의 백엔드에 해당하는 MQTT-IRC 게이트웨이와 통신합니다. 좀 더 세부적인 설명은 OpenIRC [프로젝트 구조][project-arch] 문서를 참고해주세요.

## D. 현재상태
**프론트엔드** - 아직 디자인적인 고려는 되어 있지 않지만, 쓸 수 있는 웹 프론트엔드가 만들어져 있습니다. Elm으로 개발하였는데, 기대했던 대로 개발 속도가 상당히 빨라 웹 UI는 병목이 되지 않을 것 같습니다.

**메세지 브로커** - 프로젝트 구조에서 설명했듯 MQTT 메세지 브로커를 사용할 계획인데, 프론트엔드와의 통신을 위해 현재 [Elm용 MQTT 라이브러리][elm-mqtt]를 개발중입니다.

**MQTT-IRC 게이트웨이** - 아직 이 부분은 개발을 시작하지 않았습니다.

상대적으로 노동력이 많이 투입되지 못 하고 있는, 백엔드 에 많은 도움이 필요합니다.

---

## Appendix I. 사전조사

이 부록에서는 OpenIRC 프로젝트를 시작하기 전, 바퀴의 재발명을 피하기 위해 사전에 조사해 본 각종 IRC 클라이언트들과 및 각 클라이언트를 리젝트 할 수 밖에 없었던 이유를 설명합니다.

### 1. Glowing Bear, Weechat Android

<img height=240 src="https://openirc.github.io/img/glowing-bear.png">
<img height=240 src="https://openirc.github.io/img/weechat-android.png">

개인적으로 쓰기에 굉장히 좋았지만 치명적인 단점이 있습니다.

1. 개인 리눅스 서버에 tmux/weechat 세팅을 한 후에야 사용 가능
2. weechat 세팅이 다 되어있어도 모바일 클라이언트와 연결시키는 과정이 어려움

결국 "IRC를 핸드폰으로 하면 굉장히 편하구나!" 라는 PoC 정도는 가능했지만, 실사용을 위한 선택지는 되지 못 했습니다.

### 2. Mibbit, Kiwi IRC, mIRC, HexChat, ...

<img height=240 src="https://openirc.github.io/img/mibbit.png">
<img height=240 src="https://openirc.github.io/img/kiwi.png">

세팅 없이 당장 접속하기에는 가장 좋았던 그룹입니다. 그러나

1. 연결 유지 불가능
2. 유저가 여러 클라이언트(웹, 모바일, …)를 통해 모두 같은 세션을 바라보는 것이 불가능한 구조

등의 이유로, 결국 IRC UX에 참고하는 용도로만 사용하기로 했습니다.

### 3. Shout IRC, The Lounge

![lounge]

개인서버가 있는 사람들이 쓰기에는 제일 좋아보였지만, 다음과 같은 문제가 있습니다.

1. 개인 리눅스 서버가 하나 있어야 함.
2. 개인 리눅스 서버에 nodejs 설치한뒤, npm으로 직접 설치해야함.
3. 회원가입 기능이 없음. JSON 설정으로 사전에 설정된 고정된 숫자의 계정들만 접속 가능.
4. 이를 고치려고 해도, 기존 코드가 개인사용에 완전 포커스 맞춰서 만들어진거라 수정이 용이한 구조가 아님.
5. 현재 웹 클라이언트만 있는 상황인데, 프로토콜이 문서화되어있지 않아 모바일에서는 웹브라우저로 써야하고 알림도 못 받음.

### 4. IRCtalk

![irctalk]

한국 개발자들이 예전에 개발했던, OpenIRC와 굉장히 유사한 프로젝트입니다. 아마 개발의 동기 역시 같았을 것이라 봅니다. 그러나

1. 공식 출시하기 전에 베타상태로 개발이 멈춰서, 개인적으로 요청하는게 아니면 앱을 받을수 없음
2. 옵을 주지 못하는 식으로 몇몇 기능이 없음
3. 부족한 기능을 고치고싶어도 클로즈드소스라 기여할수가 없음

과 같은 몇몇 문제점이 있습니다.

### 5. IRCCloud

![irccloud]

제일 훌륭합니다. 웹/모바일 클라이언트를 모두 지원하고, 둘 다 푸시 알림을 받을 수 있고 가장 편합니다. 그러나

1. **연 7만원**의 사용료가 있습니다. IRC를 써 보지 않은 사람이 정체 모를 채팅 앱을 사용하려고 이 돈을 낼 것 같진 않습니다.
2. 클로즈드 소스입니다.

유료라는 치명적인 단점이 있지만, "이거랑 똑같이 만들면 되겠다" 라는 단기적인 기준점으로 삼을 수 있었습니다.

[weechat]: https://openirc.github.io/img/weechat.png
[lounge]: https://openirc.github.io/img/lounge.png
[irctalk]: https://openirc.github.io/img/irctalk.png
[irccloud]: https://openirc.github.io/img/irccloud.png
[project-arch]: project-structure.md
[elm-mqtt]: https://github.com/simnalamburt/elm-mqtt
[appendix-1]: #appendix-i-사전조사
